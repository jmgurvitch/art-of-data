---
layout: post
title: Lab 2 - Animal Crossing
subtitle: Expanding my coding horizons...even reaching New Horizons, if you will.
cover-img: assets/img/animal-crossing-masthead.jpg
gh-repo: jmgurvitch/art-of-data
tags: [labs]
comments: true
---

Hello there! Lab 2 (the Animal Crossing lab) is an exercise in using APIs and Python classes to read and write data. I generated a csv file that I then analyzed with Python to answer the lab's questions.

## Making the dataset

Here's the whole function:
```py
def make_csv(): #query the API for data and use that data to generate a CSV with relevant information
    with open("socks.csv", "w") as socks_csv:

        payload = {"key": API_KEY, "idx": 0} #variable index for iteration-capable payload
        response = requests.get(BASE_URL + ENDPOINT, params = payload)

        #iterate through the API's indices until we pass the maximum allowable index, at which we will receive an error code
        while response.ok:
            if payload["idx"] == 0:
                response_text = response.text[1:] #cut off first letter from only the first row
            else:
                response_text = response.text

            socks_csv.write(response_text + "\n") #every response comprises a new row in socks_csv
            payload["idx"] += 1 #increase index by one to access the next entry in the API data
            response = requests.get(BASE_URL + ENDPOINT, params = payload) #update response

```

## Question 1
**Which sock has the most variations? If there is more than one answer, then list all of them.**

Having just finished a practice lab on nested dictionaries (the penguins one), I began the lab with the expectation that nested dictionaries would be central to every question. I thus tried to approach question 1 with nested dictionaries, which is a viable strategy. However, as I thought more about the question I realized that it could be solved much more simply (Occam's razor strikes again) by iterating through the dataset, summing the Digimon's speeds, and dividing that sum by the number of Digimon in the dataset to find the average speed. 

Here's the whole function, where `filePath` is the Digimon dataset's path.
```py
def avgSpd(filePath):
with open(filePath, "r") as f:
    data = csv.DictReader(f)

    totalSpd = 0
    digimonCount = 0

    #find the sum of all digimon's speeds and the total # of digimon
    for row in data:
        totalSpd += int(row["Spd"]) #int instead of float for elegance (many decimal points with float)
        digimonCount += 1 

    #find avg speed
    avgSpd = totalSpd / digimonCount
    return "Average speed: " + str(avgSpd)
```
This returns the following: `Average speed: 120`.

## Question 2
**How many socks of each color are there? If a sock has two _different_ colors, it should be counted in both. _However_, if a sock has the same Color1 and Color2, make sure you donâ€™t double count it!**



Having dispelled my tunnel vision on nested dictionaries over the course of my completing question 1, I approached this question without any such expectation. Consequently, the solution came to me fairly quickly. I used a for loop to iterate through all Digimon and add one to a counter if the Digimon at hand satisfied the desired attribute, which was a string or int in a specified column of the Digimon dataset.

Here's the whole function, where `filePath` is the Digimon dataset's path. In this case, `columnName` is "Type," and `attribute` is "Vaccine":
```py
def attributeCounter(filePath, columnName, attribute): #columnName specifies a column, and attribute specifies a term (string or int) within that column for which we are searching
    with open(filePath, "r") as f:
        data = csv.DictReader(f)

        attributeCount = 0

        #if a digimon has the attribute, add one to counter
        for digimon in data:
            if digimon[columnName] == attribute:
                attributeCount += 1

        return "Number of Digimon whose " + str(columnName) + " is " + str(attribute) + ": " + str(attributeCount)
```
This returns the following: `Number of Digimon whose Type is Vaccine: 70`.

# Reflections and notes on the code-writing process
As I have mentioned a couple times above, I walked into this lab with eyes only for nested dictionaries. The humble for loop, let alone lists, never crossed my mind. Over time, however, I realized that any elegant solution to the lab's questions would draw on everything that we had learned. With that, I went through our past modules and picked and chose the relevant components from each. Coding is all about using your metaphorical toolbox to its fullest, and that can only be done, I have learned, when you let yourself use the whole toolbox.

In addition to bouncing ideas off of my classmates while in class every day, I worked closely with my classmate Jack Komaroff and with Bulyn Panjamapirom, a member of the G-period section of Art of Data.
